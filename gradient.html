<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>CSS Gradient Generator</title>
    <style>
        :root { --primary: #4f46e5; --bg: #f1f5f9; }
        body { font-family: system-ui, sans-serif; background: var(--bg); padding: 40px; display: flex; justify-content: center; }
        .card { background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); width: 100%; max-width: 900px; display: grid; grid-template-columns: 350px 1fr; gap: 30px; }
        
        /* 左側控制區 */
        .controls { display: flex; flex-direction: column; gap: 20px; }
        .control-group { display: flex; flex-direction: column; gap: 8px; }
        label { font-size: 14px; font-weight: 600; color: #334155; }
        select, input[type="number"] { padding: 8px; border: 1px solid #e2e8f0; border-radius: 6px; }

        /* 顏色點清單 */
        #color-stops { display: flex; flex-direction: column; gap: 10px; }
        .stop-row { display: flex; align-items: center; gap: 8px; background: #f8fafc; padding: 8px; border-radius: 8px; border: 1px solid #eee; }
        .stop-row input[type="color"] { width: 30px; height: 30px; border: none; padding: 0; cursor: pointer; }
        .stop-row input[type="number"] { width: 50px; }
        .btn-del { color: #ef4444; cursor: pointer; border: none; background: none; font-weight: bold; }
        .btn-add { background: #10b981; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; margin-top: 10px; }

        /* 右側預覽區 */
        .preview-column { display: flex; flex-direction: column; gap: 20px; }
        #preview-box { width: 100%; height: 250px; border-radius: 12px; border: 1px solid #ddd; background: white; }
        .code-box { background: #1e293b; color: #f8fafc; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 13px; position: relative; min-height: 60px; }
        .copy-btn { position: absolute; right: 10px; top: 10px; background: var(--primary); color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; }
        .nav-back { margin-bottom: 20px; display: inline-block; text-decoration: none; color: var(--primary); font-weight: bold; }
    </style>
</head>
<body>

<div style="width: 100%; max-width: 900px;">
    <a href="index.html" class="nav-back">← 返回首頁</a>
    <div class="card">
        <div class="controls">
            <h3>漸層設定</h3>
            
            <div class="control-group">
                <label>類型</label>
                <select id="type">
                    <option value="linear-gradient">線性 (Linear)</option>
                    <option value="radial-gradient">輻射 (Radial)</option>
                </select>
            </div>

            <div id="angle-group" class="control-group">
                <label>方向 (Angle: 0-360deg)</label>
                <input type="number" id="angle" value="180">
            </div>

            <div class="control-group">
                <label>顏色點 (Color Stops)</label>
                <div id="color-stops">
                    </div>
                <button class="btn-add" onclick="addStop()">+ 新增顏色</button>
            </div>
        </div>

        <div class="preview-column">
            <div id="preview-box"></div>
            <div class="code-box">
                <button class="copy-btn" onclick="copyCode()">複製 CSS</button>
                <code id="cssOutput"></code>
            </div>
        </div>
    </div>
</div>

<script>
    const preview = document.getElementById('preview-box');
    const cssOutput = document.getElementById('cssOutput');
    const stopsContainer = document.getElementById('color-stops');
    
    let stops = [
        { color: '#4f46e5', alpha: 1, pos: 0 },
        { color: '#10b981', alpha: 1, pos: 100 }
    ];

    function hexToRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }

    function renderStops() {
        stopsContainer.innerHTML = '';
        stops.forEach((stop, index) => {
            const row = document.createElement('div');
            row.className = 'stop-row';
            row.innerHTML = `
                <input type="color" value="${stop.color}" onchange="updateStop(${index}, 'color', this.value)">
                <input type="number" step="0.1" min="0" max="1" value="${stop.alpha}" onchange="updateStop(${index}, 'alpha', this.value)" title="不透明度 (0-1)">
                <input type="number" min="0" max="100" value="${stop.pos}" onchange="updateStop(${index}, 'pos', this.value)">%
                <button class="btn-del" onclick="removeStop(${index})">×</button>
            `;
            stopsContainer.appendChild(row);
        });
        update();
    }

    function addStop() {
        stops.push({ color: '#ffffff', alpha: 1, pos: 50 });
        renderStops();
    }

    function removeStop(index) {
        if (stops.length <= 2) return alert("至少需要兩個顏色點");
        stops.splice(index, 1);
        renderStops();
    }

    function updateStop(index, field, value) {
        stops[index][field] = field === 'color' ? value : parseFloat(value);
        update();
    }

    function update() {
        const type = document.getElementById('type').value;
        const angle = document.getElementById('angle').value;
        
        document.getElementById('angle-group').style.display = (type === 'linear-gradient') ? 'flex' : 'none';

        const stopStrings = stops
            .sort((a, b) => a.pos - b.pos)
            .map(s => `${hexToRgba(s.color, s.alpha)} ${s.pos}%`)
            .join(', ');

        const gradientStr = type === 'linear-gradient' 
            ? `${type}(${angle}deg, ${stopStrings})`
            : `${type}(circle, ${stopStrings})`;

        preview.style.background = gradientStr;
        cssOutput.innerText = `background: ${gradientStr};`;
    }

    function copyCode() {
        navigator.clipboard.writeText(cssOutput.innerText);
        alert('CSS 已複製');
    }

    document.getElementById('type').addEventListener('change', update);
    document.getElementById('angle').addEventListener('input', update);
    
    renderStops(); // 初始化
</script>
</body>
</html>